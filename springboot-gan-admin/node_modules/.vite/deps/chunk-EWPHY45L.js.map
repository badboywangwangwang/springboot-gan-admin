{
  "version": 3,
  "sources": ["../../element-plus/es/utils/config.js", "../../element-plus/es/utils/popup-manager.js"],
  "sourcesContent": ["let $ELEMENT = {};\r\nconst setConfig = (option) => {\r\n    $ELEMENT = option;\r\n};\r\nconst getConfig = (key) => {\r\n    return $ELEMENT[key];\r\n};\n\nexport { getConfig, setConfig };\n", "import isServer from './isServer';\nimport { getConfig } from './config';\nimport { addClass, removeClass, on } from './dom';\nimport { EVENT_CODE } from './aria';\n\nconst onTouchMove = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n};\r\nconst onModalClick = () => {\r\n    PopupManager === null || PopupManager === void 0 ? void 0 : PopupManager.doOnModalClick();\r\n};\r\nlet hasModal = false;\r\nlet zIndex;\r\nconst getModal = function () {\r\n    if (isServer)\r\n        return;\r\n    let modalDom = PopupManager.modalDom;\r\n    if (modalDom) {\r\n        hasModal = true;\r\n    }\r\n    else {\r\n        hasModal = false;\r\n        modalDom = document.createElement('div');\r\n        PopupManager.modalDom = modalDom;\r\n        on(modalDom, 'touchmove', onTouchMove);\r\n        on(modalDom, 'click', onModalClick);\r\n    }\r\n    return modalDom;\r\n};\r\nconst instances = {};\r\nconst PopupManager = {\r\n    modalFade: true,\r\n    modalDom: undefined,\r\n    zIndex,\r\n    getInstance: function (id) {\r\n        return instances[id];\r\n    },\r\n    register: function (id, instance) {\r\n        if (id && instance) {\r\n            instances[id] = instance;\r\n        }\r\n    },\r\n    deregister: function (id) {\r\n        if (id) {\r\n            instances[id] = null;\r\n            delete instances[id];\r\n        }\r\n    },\r\n    nextZIndex: function () {\r\n        return ++PopupManager.zIndex;\r\n    },\r\n    modalStack: [],\r\n    doOnModalClick: function () {\r\n        const topItem = PopupManager.modalStack[PopupManager.modalStack.length - 1];\r\n        if (!topItem)\r\n            return;\r\n        const instance = PopupManager.getInstance(topItem.id);\r\n        if (instance && instance.closeOnClickModal.value) {\r\n            instance.close();\r\n        }\r\n    },\r\n    openModal: function (id, zIndex, dom, modalClass, modalFade) {\r\n        if (isServer)\r\n            return;\r\n        if (!id || zIndex === undefined)\r\n            return;\r\n        this.modalFade = modalFade;\r\n        const modalStack = this.modalStack;\r\n        for (let i = 0, j = modalStack.length; i < j; i++) {\r\n            const item = modalStack[i];\r\n            if (item.id === id) {\r\n                return;\r\n            }\r\n        }\r\n        const modalDom = getModal();\r\n        addClass(modalDom, 'v-modal');\r\n        if (this.modalFade && !hasModal) {\r\n            addClass(modalDom, 'v-modal-enter');\r\n        }\r\n        if (modalClass) {\r\n            const classArr = modalClass.trim().split(/\\s+/);\r\n            classArr.forEach(item => addClass(modalDom, item));\r\n        }\r\n        setTimeout(() => {\r\n            removeClass(modalDom, 'v-modal-enter');\r\n        }, 200);\r\n        if (dom && dom.parentNode && dom.parentNode.nodeType !== 11) {\r\n            dom.parentNode.appendChild(modalDom);\r\n        }\r\n        else {\r\n            document.body.appendChild(modalDom);\r\n        }\r\n        if (zIndex) {\r\n            modalDom.style.zIndex = String(zIndex);\r\n        }\r\n        modalDom.tabIndex = 0;\r\n        modalDom.style.display = '';\r\n        this.modalStack.push({ id: id, zIndex: zIndex, modalClass: modalClass });\r\n    },\r\n    closeModal: function (id) {\r\n        const modalStack = this.modalStack;\r\n        const modalDom = getModal();\r\n        if (modalStack.length > 0) {\r\n            const topItem = modalStack[modalStack.length - 1];\r\n            if (topItem.id === id) {\r\n                if (topItem.modalClass) {\r\n                    const classArr = topItem.modalClass.trim().split(/\\s+/);\r\n                    classArr.forEach(item => removeClass(modalDom, item));\r\n                }\r\n                modalStack.pop();\r\n                if (modalStack.length > 0) {\r\n                    modalDom.style.zIndex = modalStack[modalStack.length - 1].zIndex;\r\n                }\r\n            }\r\n            else {\r\n                for (let i = modalStack.length - 1; i >= 0; i--) {\r\n                    if (modalStack[i].id === id) {\r\n                        modalStack.splice(i, 1);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (modalStack.length === 0) {\r\n            if (this.modalFade) {\r\n                addClass(modalDom, 'v-modal-leave');\r\n            }\r\n            setTimeout(() => {\r\n                if (modalStack.length === 0) {\r\n                    if (modalDom.parentNode)\r\n                        modalDom.parentNode.removeChild(modalDom);\r\n                    modalDom.style.display = 'none';\r\n                    PopupManager.modalDom = undefined;\r\n                }\r\n                removeClass(modalDom, 'v-modal-leave');\r\n            }, 200);\r\n        }\r\n    },\r\n};\r\nObject.defineProperty(PopupManager, 'zIndex', {\r\n    configurable: true,\r\n    get() {\r\n        if (zIndex === undefined) {\r\n            zIndex = getConfig('zIndex') || 2000;\r\n        }\r\n        return zIndex;\r\n    },\r\n    set(value) {\r\n        zIndex = value;\r\n    },\r\n});\r\nconst getTopPopup = function () {\r\n    if (isServer)\r\n        return;\r\n    if (PopupManager.modalStack.length > 0) {\r\n        const topPopup = PopupManager.modalStack[PopupManager.modalStack.length - 1];\r\n        if (!topPopup)\r\n            return;\r\n        const instance = PopupManager.getInstance(topPopup.id);\r\n        return instance;\r\n    }\r\n};\r\nif (!isServer) {\r\n    on(window, 'keydown', function (event) {\r\n        if (event.code === EVENT_CODE.esc) {\r\n            const topPopup = getTopPopup();\r\n            if (topPopup && topPopup.closeOnPressEscape.value) {\r\n                topPopup.handleClose\r\n                    ? topPopup.handleClose()\r\n                    : topPopup.handleAction\r\n                        ? topPopup.handleAction('cancel')\r\n                        : topPopup.close();\r\n            }\r\n        }\r\n    });\r\n}\n\nexport default PopupManager;\n"],
  "mappings": "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",
  "names": ["zIndex"]
}
